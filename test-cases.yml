---
- summary: |
    Проверка авторизации через email
  requirement: |
    При верном вводе логине и пароля пользователь должен войти в систему
  prerequisites: |
    открыта страница логина
    https://codebattle.hexlet.io/session/new
  test-data: |
    Тестовые данные
    Логин = diramiraz@yandex.ru Пароль = 252332
  steps:
    - Вводим логин
    - Вводим пароль
    - Нажимаем кнопку «Войти»
  expected-result: |
    Успешная авторизация

- summary: |
    Проверка авторизации незарегистрированного пользователя
  requirement: |
    При неправильном логине или пароле пользователь должен получить сообщение об ошибке
  prerequisites:
    Открыта страница логина
  test-data: |
    Логин = Логин = hexlet Пароль = badpass
  steps:
    - Вводим логин
    - Вводим пароль
    - Нажимаем кнопку «Войти»
  expected-result: |
    Пользователь не авторизован

- summary: |
    Проверка ссылки в письме о восстановлении пароля
  requirement: |
    При верно указанных данных, получить письмо на почту
  prerequisites:
    Открыта страница логина
    https://codebattle.hexlet.io/session/new
  test-data: |
    Логин = diramiraz@yandex.ru
  steps:
    - Выбирает Forgot password
    - Вводим email
    - Нажимаем кнопку «Submit»
  expected-result: |
    Пользователь должен получить сообщение "We have sent you an email with instructions on how to reset your password"

- summary: |
    Авторизация через Discord
  requirement: |
    При использовании аккаунта Discord пользователь должен войти в систему
  prerequisites:
    Открыта страница логина
    https://codebattle.hexlet.io/session/new
  test-data: |
    Заранее подготовленный аккаунт Discord
  steps:
    - Выбирает Sign in with Discord
    - Авторизирцемся учетной записью Discord
    - Нажимаем кнопку «Авторизовать»
  expected-result: |
    Успешная авторизация

- summary: |
    Авторизация через Github
  requirement: |
    При использовании аккаунта Github пользователь должен войти в систему
  prerequisites:
    Открыта страница логина
    https://codebattle.hexlet.io/session/new
  test-data: |
    Заранее подготовленный аккаунт Github
  steps:
    - Выбирает Sign in with Github
    - Авторизирцемся учетной записью Discord
  expected-result: |
    Успешная авторизация

- summary: |
    Cоздание игры со случайным юзером Level 1
  requirement: |
    При создании игры она отобразится в lobby
  prerequisites:
    Открыта страница lobby
    https://codebattle.hexlet.io/#lobby
  test-data: |
    https://codebattle.hexlet.io/#lobby
  steps:
    - Нажимаем Create a Game
    - Level 1 (star)
    - Whith other user
    - Time control 10 min
    - Choose task by name or tags - random task
    - Tags - не выбираем
  expected-result: |
    Игра создалась в lobby

- summary: |
    Cоздание игры со случайным юзером Level 3
  requirement: |
    При создании игры она отобразится в lobby
  prerequisites:
    Открыта страница lobby
    https://codebattle.hexlet.io/#lobby
  test-data: |
    https://codebattle.hexlet.io/#lobby
  steps:
    - Нажимаем Create a Game
    - Level 3 (star)
    - Whith other user
    - Time control 30 min
    - Choose task by name or tags - get_file
  expected-result: |
    Игра создалась в lobby

- summary: |
    Вступить в игру случайного юзера
  requirement: |
    При выборе игры открывется CodeBattle
  prerequisites:
    Открыта страница lobby
    https://codebattle.hexlet.io/#lobby
  test-data: |
    https://codebattle.hexlet.io/#lobby
  steps:
    - Выбираем вкладку Lobby
    - В первой доступной игры выбираем Fight
  expected-result: |
    Открылся режим CodeBattle

- summary: |
    Создание приглашения в игру для друга
  requirement: |
    Отправка уведомления другу
  prerequisites:
    Открыта страница lobby
    https://codebattle.hexlet.io/#lobby
  test-data: |
    https://codebattle.hexlet.io/#lobby
  steps:
    - Выбираем Create a Game
    - Game type - Whith a friend
    - choose opponent - выбираем друга
    - Crate invite
  expected-result: |
    В окне General получено сообщение: You invite [НИК] to battle. Wait for his reply

- summary: |
    Отмена созданного приглашения для друга
  requirement: |
    Успешная отмена приглашения
  prerequisites:
    Открыта страница lobby
    https://codebattle.hexlet.io/#lobby
  test-data: |
    https://codebattle.hexlet.io/#lobby
  steps:
    - Выбираем Create a Game
    - Game type - Whith a friend
    - choose opponent - выбираем друга
    - Crate invite
    - В userbar нажимаем на мечи 
    - выбираем Cancel
  expected-result: |
    В окне General получено сообщение: You cancel battle invite [Opponent НИК]

- summary: |
    Отправка приватных сообщений
  requirement: |
    Успешная отправка сообщений
  prerequisites:
    Открыта страница lobby
    https://codebattle.hexlet.io/#lobby
  test-data: |
    https://codebattle.hexlet.io/#lobby
  steps:
    - Справа от General - раздел online
    - Выбираем иконку письма
    - Выбираем друга пользователя из списка
    - Вводим сообщение в сменившемся блоке General
    - Send
  expected-result: |
    Сообщение отправлено пользователю

- summary: |
    Отправка приватных сообщений из lobby
  requirement: |
    Успешная отправка сообщений
  prerequisites:
    Открыта страница lobby
    https://codebattle.hexlet.io/#lobby
  test-data: |
    https://codebattle.hexlet.io/#lobby
  steps:
    - Справа от General - раздел online
    - Выбираем пользователя онлайн и жмем на его ник
    - В открывшемся меню выбираем: Direct message
    - Вводим сообщение в сменившемся блоке General
    - Send
  expected-result: |
    Сообщение отправлено пользователю

- summary: |
    Создание игры без регистрации
  requirement: |
    Игра успешно создалась
  prerequisites:
    Выйти из аккаунта
    Открыта главная страница
    https://codebattle.hexlet.io/
  test-data: |
    https://codebattle.hexlet.io/
  steps:
    - Выбираем TRY SIMPLE BATTLE
  expected-result: |
    Открылся режим CodeBattle без регистрации/авторизации

- summary: |
    Открыть игру с другом
  requirement: |
    Создалась игра с другом
  prerequisites:
    Открыта страница lobby
    https://codebattle.hexlet.io/#lobby
  test-data: |
    https://codebattle.hexlet.io/#lobby
  steps:
    - Выбираем Create a Game
    - Game type - Whith a friend
    - choose opponent - выбираем друга
    - Crate invite
    - ждем подтверждения
  expected-result: |
    Открылся режим CodeBattle с другом

- summary: |
    Победить друга в CodeBattle
  requirement: |
    Успешно пройденный CodeBattle
  prerequisites:
    Открыта страница lobby
    https://codebattle.hexlet.io/#lobby
  test-data: |
    https://codebattle.hexlet.io/#lobby
  steps:
    - Выбираем Create a Game
    - Game type - Whith a friend
    - choose opponent - выбираем друга
    - Crate invite
    - ждем подтверждения
    - приступаем к прохождению
  expected-result: |
    Успешно пройденная игра

- summary: |
    Отменить приглашение в CodeBattle
  requirement: |
    Успешная отмена приглашения
  prerequisites:
    Открыта страница lobby
    https://codebattle.hexlet.io/#lobby
    Подготовленй второй браузер
    Создан второй аккаунт
    email@mailemail.uberu
    123489
  test-data: |
    https://codebattle.hexlet.io/#lobby
  steps:
    - Переходим во второй аккаунт (браузер)
    - В userbar нажимаем на мечи 
    - Нажимаем Dicline
  expected-result: |
    Получено сообщение: You decline battle invite [Opponent НИК]
